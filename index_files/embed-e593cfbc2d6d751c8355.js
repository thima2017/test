!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var a in n)("object"==typeof exports?exports:e)[a]=n[a]}}(this,function(){return webpackJsonp([54],{1376:function(e,t,n){"use strict";var a=n(403),i=n.n(a),r=n(27),o=n.n(r),s=n(88),c=n(1377),l=n.n(c),u=n(1378),d=n(850),h=n(852),p=n(1381),f=n(326),m=n(21),g=n(3),v=n(159),_={APICore1_0:d.a,APICore1_2:h.a,APICore1_3:p.a},w=function(e,t){return new _[e](t)},y=function(e){this._definitions={},this._instance=void 0,this._instanceId=e,this._name=void 0,this._parentDomain=this.getMessageTargetDomain(document.referrer),this._defer=new s.a};y.create=function(e,t,n,a){var i;if(t){var r=t;i=new y(e);var s=l.a[t];if(!s){var c=o()(l.a),d=c[c.length-1];s=l.a[d],console.warn("you requested api version "+t+" but this version is not available. Returned api version "+d+" instead"),r=d}var h=w("APICore"+s.ApiCoreVersion,n);i.register(r,s,h)}else i=new u.a,i.initialize(n,a),console.warn("you are using a deprecated api, please update to the new one, read mode xxxx");return i},y.prototype={ready:function(){if(window.parent){var e=Object(m.a)().apiHookEnv;if(void 0!==e){if(g.a.me().get("isStaff")){var t=new XMLHttpRequest,n=function(e){if(t.readyState===XMLHttpRequest.DONE){var n=JSON.parse(e.target.response);if(n.domain){var a=n.domain;if(a!==window.location.hostname){var i={type:"api.ready",instanceId:this._instanceId,results:[this._instanceId],options:{domain:a}};return void window.parent.postMessage(i,this._parentDomain)}}}}.bind(this);t.addEventListener("load",n),t.open("GET","/i/users/viewer-api/authorized-domains?domain="+e);var a=document.cookie.match(new RegExp("sb_csrftoken=([^;]+)"));a||console.error("CRSF cookie missing");var i=a[1];t.setRequestHeader("X-CSRFToken",i),t.send()}}var r={type:"api.ready",instanceId:this._instanceId,results:[this._instanceId]};Object(f.a)()||(r.error="No Hardware Support for Webgl"),window.parent.postMessage(r,this._parentDomain)}},clientReady:function(){return this._defer.promise},register:function(e,t,n){this._name=e,this._members=o()(t),this._membersMapping=t,this._instance=n,this.init()},getViewerAPI:function(){return this._instance},getMessageTargetDomain:function(e){if(!e||!e.length)return"*";if(window.location.href.split("?")[0]===e.split("?")[0]){var t="Embed With Wrong options: "+e;return v.a.client.captureMessage(t),console.warn(t),"*"}var n=e.split("//");return n[0]+"//"+n[1].split("/")[0]},init:function(){this._defer.resolve();var e=["api.initialize","api.request"],t=i()(this._instance);window.addEventListener("message",function(n){if((n.origin===this._parentDomain||"*"===this._parentDomain)&&n.data&&n.data.type){var a=n.data.type;if(-1!==e.indexOf(a)){var i="api.initialize"!==a;if(!i||n.data.instanceId&&n.data.instanceId===this._instanceId)try{if(i&&this._instanceId!==n.data.instanceId)throw"Invalid request : instance does not exists";if("api.request"===n.data.type){var r=this._membersMapping[n.data.member];if("-"===r&&(r=n.data.member),!r||!t[r])throw"Invalid request : member function does not exists: "+r;if("function"!=typeof t[r])throw"Invalid request : member function does not exists: "+r;for(var o=t[r],s=n.data.arguments.slice(),c=s.length-1;c>=0&&void 0===s[c];c--)s.splice(c,1);return o.length&&"function"==typeof s[o.length-1]&&(s.length=o.length-1),s.push(function(){n.source.postMessage({type:"api.request.result",instanceId:this._instanceId,requestId:n.data.requestId,results:Array.prototype.slice.call(arguments)},this._parentDomain)}.bind(this)),void o.apply(this._instance,s)}if("api.initialize"===n.data.type){if(this._name!==n.data.name)throw"No API named '"+n.data.name+"'";var l=this._members,u=this._instance;if(void 0!==u.addGlobalListener){var d=function(){var e={type:"api.event",instanceId:this._instanceId,results:Array.prototype.slice.call(arguments)};n.source.postMessage(e,this._parentDomain)}.bind(this);u.addGlobalListener(d)}return void n.source.postMessage({type:"api.initialize.result",instanceId:this._instanceId,requestId:n.data.requestId,results:[null,this._instanceId,l]},this._parentDomain)}}catch(e){console.error(e),n.source.postMessage({type:a+".result",instanceId:this._instanceId,requestId:n.data.requestId,results:[e.stack?e.stack:e]},this._parentDomain)}}}}.bind(this))}},t.a=y},1377:function(e,t,n){var a=n(0).extend,i={ApiCoreVersion:"1_0",start:"-",stop:"-",load:"-",gotoAnnotation:"-",getAnnotationList:"-",lookat:"-",setFov:"-",getCurrentTime:"-",play:"-",pause:"-",seekTo:"-",getAnimations:"-",setCurrentAnimationByUID:"-",setCycleMode:"-",setSpeed:"-",getSceneGraph:"-",getNodeMap:"-",getMatrix:"-",setMatrix:"-",hide:"-",show:"-",translate:"-",rotate:"-",getRootMatrixNode:"-",getCameraLookAt:"-",setCameraLookAt:"-",getScreenShot:"-",getMaterialList:"-",getTextureList:"-",addTexture:"-",updateTexture:"-",setTextureQuality:"-",setMaterial:"-",setPostProcessing:"-",getPostProcessing:"-"},r=a({},i,{getWorldToScreenCoordinates:"-"}),o=a({},r,{ApiCoreVersion:"1_2",pickColor:"-",setListenerOptions:"-",unselectAnnotation:"-"}),s=a({},o,{ApiCoreVersion:"1_3",setCameraEasing:"-",showAnnotation:"-",hideAnnotation:"-",getAnnotation:"-",updateAnnotation:"-",createAnnotation:"-",removeAnnotation:"-",pickFromScene:"-",pickFromScreen:"-",addVideoTexture:"-",translate:"-",rotate:"-"}),c=a({},s,{});e.exports={"1.0.0":i,"1.0.1":i,"1.0.2":i,"1.0.3":i,"1.1.0":r,"1.2.0":o,"1.2.1":o,"1.3.0":s,"1.3.1":c}},1378:function(e,t,n){"use strict";var a=n(5),i=n.n(a),r=function(){return{_viewer:void 0,version:"0.2",initialize:function(e,t){this._viewer=e,this._uid=t;var n=this;window.addEventListener("message",function(e){if(e.data&&e.data.command){var t=e.data;"initialize"!==t.command&&Object.prototype.hasOwnProperty.call(n,t.command)&&n[t.command].call(n,t)}},!1)},ready:function(){this.answer({status:"load"})},clientReady:function(){return i.a.resolve()},answer:function(e){e.source=this._uid,void 0!==window.parent&&window.parent.postMessage(e,"*")},start:function(){this._viewer.start(),this.answer({status:"start"})},stop:function(){this._viewer.stop(),this.answer({status:"stop"})},lookat:function(e){this._viewer.lookat&&(this._viewer.lookat(e.eye,e.target,e.duration),window.setTimeout(function(){this.answer({status:"lookat"})}.bind(this),1e3*e.duration),this.answer({status:"lookat start"}))},autospin:function(e){!1===e&&(e=0),this.answer({status:"autospin"})},getViewerAPI:function(){}}};t.a=r},1379:function(e,t,n){"use strict";var a=n(8),i=a.a.osg,r=function(){i.NodeVisitor.apply(this,arguments),this.reset()};i.createPrototypeObject(r,i.objectInherit(i.NodeVisitor.prototype,{reset:function(){this._nodes=[],this._nodeMap={},this._nodeList={},this._dirty=!0},isDirty:function(){return this._dirty},getRootNode:function(){return this._nodes[0]},getRealNodeMap:function(){return this._nodeList},getRepresentationNodeMap:function(){return this._nodeMap},createNodeEntry:function(e){this._dirty=!1;var t=e.getInstanceID();this._nodeList[t]||(this._nodeList[t]=e);var n={name:e.getName(),instanceID:t,nodeMask:e.getNodeMask()};return this._nodeMap[t]||(this._nodeMap[t]=n),n},applyNode:function(e){var t=this._nodes;this._nodes=[],this.traverse(e);var n=this.createNodeEntry(e);n.children=this._nodes,n.type="Group",t.push(n),this._nodes=t},applyMatrixTransform:function(e){var t=this._nodes;this._nodes=[],this.traverse(e);var n=this.createNodeEntry(e);n.children=this._nodes,n.type="MatrixTransform",n.localMatrix=i.mat4.clone(e.getMatrix()),n.worldMatrix=e.getWorldMatrices()[0],t.push(n),this._nodes=t},applyGeometry:function(e){var t=this._nodes;this._nodes=[],this.traverse(e);var n=this.createNodeEntry(e);n.type=e.className(),t.push(n),this._nodes=t},apply:function(e){var t=e.getTypeID();t===i.Node.typeID?this.applyNode(e):t===i.MatrixTransform.typeID?this.applyMatrixTransform(e):e instanceof i.Geometry?this.applyGeometry(e):this.traverse(e)}})),t.a=r},1380:function(e,t,n){"use strict";function a(){this.handlers=[],this.events=[]}a.prototype={subscribe:function(e){this.events.forEach(function(t){e(t.name,t.args)});var t=this.handlers.push(e);return function(){this.handlers.split(t-1,1)}},emit:function(e,t){this.events.push({name:e,args:t}),this.handlers.forEach(function(n){n(e,t)})}},t.a=a},1381:function(e,t,n){"use strict";var a=n(8),i=n(852),r=n(152),o=n(76),s=n(0),c=(n.n(s),n(851)),l=n(42),u=n(18),d=a.a.osg,h=a.a.osgAnimation,p=function(){i.a.apply(this,arguments),this.updateDaemon=void 0};p.prototype=Object(s.create)(i.a.prototype,{setCameraEasing:function(e){this._getFeatureModel("camera").set("easingFunction",e)},hideAnnotation:function(e,t){this._getFeatureModel("hotspot").get("hotspots").at(e).set("visible",!1),t(null)},showAnnotation:function(e,t){this._getFeatureModel("hotspot").get("hotspots").at(e).set("visible",!0),t(null)},createAnnotation:function(e,t,n,a,i,o,s){var c=r.a.computeNearestIntersection3D(e,t);if(!c)return s(null);var l=this._getFeatureModel("hotspot"),d=l.createHotspot(c,!0);u.a.getMarkdownPreview(o).then(function(e){d.set({name:i,content:{raw:o,rendered:e.result},eye:n,target:a}),s(null,l.get("hotspots").length-1)},function(){d.set({name:i,eye:n,target:a}),s(null,l.get("hotspots").length-1)}.bind(this))},updateAnnotation:function(e){var t,n=this._getFeatureModel("hotspot").get("hotspots"),a=n.at(e);if(3===arguments.length){var i=arguments[1],r={};if(i.title&&(r.name=i.title),i.content&&(r.content={raw:i.content}),i.eye&&(r.eye=i.eye),i.target&&(r.target=i.target),t=arguments[2],i.content)return void u.a.getMarkdownPreview(i.content).then(function(e){r.content.rendered=e.result;var n=a.toJSON();this._filterAnnotationModelMessage(n),t(null,n),a.set(r)}.bind(this),function(){var e=a.toJSON();this._filterAnnotationModelMessage(e),t(null,e),a.set(r)}.bind(this));a.set(r)}else t=arguments[1];var o=a.toJSON();this._filterAnnotationModelMessage(o),t(null,o)},getAnnotation:function(e,t){var n=this._getFeatureModel("hotspot").get("hotspots"),a=n.at(e),i=a.toJSON();this._filterAnnotationModelMessage(i),t(null,i)},removeAnnotation:function(e,t){var n=this._getFeatureModel("hotspot").get("hotspots"),a=n.at(e);n.remove(a),t(null)},pickFromScreen:function(){var e=d.vec3.create(),t=d.vec3.create();return function(n,a){var i=r.a.computeNearestIntersection2D(n[0],n[1],this._pickMask.click);i||a(null),r.a.getWorldPositionFromHit(i,t,e);var o=i._nodePath[i._nodePath.length-1].getInstanceID(),s=this._getFeatureModel("material"),c=s.findFirstMaterial(i._nodePath);a(null,{position3D:t,position2D:n,normal:e,instanceID:o,material:c})}}(),pickFromScene:function(){var e=d.vec3.create(),t=d.vec3.create();return function(n,a,i){var o=r.a.computeNearestIntersection3D(n,a);if(!o)return i(null);r.a.getWorldPositionFromHit(o,t,e);var s=o._nodePath[o._nodePath.length-1].getInstanceID(),c=this._getFeatureModel("material"),l=c.findFirstMaterial(o._nodePath);i(null,{position3D:t,normal:e,instanceID:s,material:l})}}(),addVideoTexture:function(e,t,n){this._convertVideoDataUriToImage(e,void 0,t,n)},_convertVideoDataUriToImage:function(e,t,n,a){var i=this._getFeatureModel("material").getImageCollection();o.default.instance.getOrCreateImage(e).promise.then(function(r){var o=i.addNewImage({uid:t,url:e,width:r.getWidth(),height:r.getHeight(),name:e.slice(0,100)});void 0!==n&&r.getImage&&(r.getImage().loop=n),a(null,o.getUID())}).catch(function(){a("failed to add texture")})},translate:function(e,t,n){var a=arguments.length,i=arguments[a-1],r=0,o=h.easeOutQuad;a>2&&(n=arguments[2],n.duration&&(r=n.duration),n.easing&&h[n.easing]&&(o=h[n.easing]));var s=this._getRealNodeMap(),u=s[e];if(u.getTypeID()!==d.MatrixTransform.typeID)return void i("you can only translate MatrixTransform nodes");if(r>0){var p=d.vec3.create();d.mat4.getTranslation(p,u.getMatrix());var f=new c.c(p,t,r,o,function(t){this.updateDaemon.removeTranslateUpdateCallback(e),i(null,t)}.bind(this));this.updateDaemon||this._initUpdateDaemon(s),this.updateDaemon.addTranslateUpdateCallback(u,f,e)}else d.mat4.setTranslation(u.getMatrix(),t),u.dirtyBound(),i(null,t);l.a.redrawShadow()},rotate:function(){var e=d.vec3.create(),t=d.vec3.create();return function(n,a,i){var r=arguments.length,o=arguments[r-1],s=0,u=h.easeOutQuad;r>2&&(i=arguments[2],i.duration&&(s=i.duration),i.easing&&h[i.easing]&&(u=h[i.easing]));var p=this._getRealNodeMap();if(p[n].getTypeID()!==d.MatrixTransform.typeID)return void o("you can only rotate MatrixTransform nodes");var f=d.quat.create(),m=d.mat4.create();d.mat4.fromRotation(m,-a[0],d.vec3.set(t,a[1],a[2],a[3])),d.mat4.getRotation(f,m);var g=p[n];if(s>0){var v=d.quat.create();d.mat4.getRotation(v,g.getMatrix());var _=new c.a(v,f,s,u,function(e){this.updateDaemon.removeRotateUpdateCallback(n),o(null,e)}.bind(this));this.updateDaemon||this._initUpdateDaemon(p),this.updateDaemon.addRotateUpdateCallback(g,_,n)}else d.mat4.fromQuat(m,f),d.mat4.getTranslation(e,g.getMatrix()),d.mat4.setTranslation(m,e),d.mat4.copy(g.getMatrix(),m),g.dirtyBound(),o(null,a);l.a.redrawShadow()}}(),_initUpdateDaemon:function(e){var t=this._getViewer().getRootModel();this.updateDaemon=new c.b(e),t.addUpdateCallback(this.updateDaemon)}}),t.a=p},143:function(e,t,n){"use strict";var a=(n(14),n(4)),i=n.n(a),r=n(5),o=n.n(r),s=(n(309),n(310),n(331),n(332)),c=n(293),l=n(159),u=n(77),d=n(294),h=n(311);o.a.config({warnings:!1,longStackTraces:!1,cancellation:!0,monitoring:!1}),Object(s.a)(),Object(c.a)(),Object(h.a)(),l.a.install(),u.a.collectLastTouchUTMs(),Object(d.a)(),window.publicLibraries={$:i.a},window.editorModels={}},1463:function(e,t,n){"use strict";var a=n(4),i=n.n(a),r=n(0),o=(n.n(r),n(46)),s=n.n(o),c=n(7),l=n(21),u=n(3),d=n(206),h=n(719),p=n(1376),f=n(718),m=n(12),g=c.a.extend({mixins:[d.a],events:{'click [data-action="start"]':"start",'click [data-action="allowRestricted"]':"allowRestricted","mouseenter .avatar[data-user]":"enterAvatar","mouseleave .avatar[data-user]":"leaveAvatar","mouseenter .user-summary":"enterUserSummary","mouseleave .user-summary":"leaveUserSummary"},getUserSummary:function(){var e=this;n.e(29).then(n.bind(null,208)).then(function(t){var n=t.default;e.userSummary=new n})},initialize:function(){if(c.a.prototype.initialize.apply(this,arguments),!0!==this.model.get("isDeleted")){var e=!!Object(l.a)().autostart;(e||Object(l.a)().apiId)&&this.start(e);var t=Object(l.a)().uiInfos;if(void 0===t){var n=Object(l.a)().descButton;t=void 0===n||n}s.a.any||this.getUserSummary(),this.handleLazyLoading(),this.initializeSharingOverlay()}},start:Object(r.once)(function(e){this.initializeViewer(e)}),allowRestricted:function(){u.a.me().setAllowsRestricted(!0),this.$(".overlay.restricted").addClass("hidden")},initializeSharingOverlay:function(){var e=this;n.e(28).then(n.bind(null,2536)).then(function(t){var n=t.default;e.shareOverlay=new n({el:e.$(".share.overlay"),model:e.model,embedPage:e}),e.onShareClick=e.onShareClick.bind(e),e.$(".titlebar .actions .share").on("click",e.onShareClick)})},onShareClick:function(){this.shareOverlay.show(),m.a.modelEmbedShareButtonClicked(this.model.get("uid"))},onViewerStart:function(){this.$(".titlebar .actions .share").off("click",this.onShareClick)},onViewerStop:function(){},initializeViewer:function(e){var t=this.$(".viewer");this.$(".play").addClass("loading"),e&&t.addClass("started");var n=new h.a({el:t});this.viewer=n;var a=Object(l.a)().apiVersion,i=p.a.create(Object(l.a)().apiId,a,n,this.model.get("uid"));n.on("start",this.onViewerStart),n.on("stop",this.onViewerStop),n.setScene({uid:this.model.get("uid"),features:f.a,viewerAPI:i.getViewerAPI()}),this.$(".play").removeClass("loading"),i?(this.api=i,i.ready(),i.clientReady().then(function(){e&&n.start(e)})):e&&n.start(e)},toggleUserSummary:function(){var e=!(!this.inAvatar&&!this.inUserSummary);this.userSummary[e?"show":"hide"]()},enterAvatar:function(e){var t=i()(e.currentTarget).data("user");this.inAvatar=!0,this.userSummary.setUser(t),this.userSummary.anchor(e.currentTarget),this.toggleUserSummary()},leaveAvatar:function(){this.inAvatar=!1,this.toggleUserSummary()},enterUserSummary:function(){this.inUserSummary=!0,this.toggleUserSummary()},leaveUserSummary:function(){this.inUserSummary=!1,this.toggleUserSummary()}});t.a=g},1658:function(e,t,n){n(1659),e.exports=n(1660)},1659:function(e,t){},1660:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(n(143),n(14)),i=n(25),r=n.n(i),o=n(4),s=(n.n(o),n(1661)),c=(n.n(s),n(1662)),l=(n.n(c),n(1663)),u=n(59),d=n(20),h=n(402),p=n(849),f=n(649),m=n(1665),g=n(1463),v=n(21),_=Object(h.b)().host,w=!1;if(_===window.location.host?w=!0:a.a.internalDomains.forEach(function(e){_===e.domain?w=!0:e.allowSubdomains&&_&&_.endsWith("."+e.domain)&&(w=!0)}),Object(v.a)().internal&&!w)document.location.replace(d.b.craft("?",d.b.reset(window.location.search.substr(1),{internal:null})));else if(Object(p.a)(),Object(f.a)()){Object(m.a)();var y=document.location.pathname.match(/models\/(.*?)\/embed/)[1];u.a.get(y).then(function(e){new g.a({model:e,el:"body"})})}else new l.a,r.a.history.start({pushState:!0})},1661:function(e,t,n){"use strict";!function(){if(void 0===window.performance&&(window.performance={}),!window.performance.now){var e=Date.now();performance.timing&&performance.timing.navigationStart&&(e=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-e}}window.performance.mark||(window.performance.mark=function(){}),window.performance.measure||(window.performance.measure=function(){})}(),window.rStats=function(e){function t(e,t){for(var n=Object.keys(e),a=0,i=n.length;a<i;a++)t(n[a])}function n(e){var t=document.createElement("link");t.href=e,t.rel="stylesheet",t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t)}function a(e,t,n){function a(e,t){c+=.1*(e-c),s*=.99,c>s&&(s=c),o.drawImage(r,1,0,r.width-1,r.height,0,0,r.width-1,r.height),t?o.drawImage(h,r.width-1,r.height-c*r.height/s-p):o.drawImage(u,r.width-1,r.height-c*r.height/s-p)}var i=n||{},r=document.createElement("canvas"),o=r.getContext("2d"),s=0,c=0,l=i.color?i.color:"#666666",u=document.createElement("canvas"),d=u.getContext("2d");u.width=1,u.height=2*p,d.fillStyle="#444444",d.fillRect(0,0,1,2*p),d.fillStyle=l,d.fillRect(0,p,1,p),d.fillStyle="#ffffff",d.globalAlpha=.5,d.fillRect(0,p,1,1),d.globalAlpha=1;var h=document.createElement("canvas"),m=h.getContext("2d");return h.width=1,h.height=2*p,m.fillStyle="#444444",m.fillRect(0,0,1,2*p),m.fillStyle="#b70000",m.fillRect(0,p,1,p),m.globalAlpha=.5,m.fillStyle="#ffffff",m.fillRect(0,p,1,1),m.globalAlpha=1,function(){r.width=f,r.height=p,r.style.width=r.width+"px",r.style.height=r.height+"px",r.className="rs-canvas",e.appendChild(r),o.fillStyle="#444444",o.fillRect(0,0,r.width,r.height)}(),{draw:a}}function i(e,n){function a(e){r.drawImage(i,1,0,i.width-1,i.height,0,0,i.width-1,i.height);var n=0;t(e,function(t){var a=e[t]*i.height;r.fillStyle=l[t],r.fillRect(i.width-1,n,1,a),n+=a})}var i=document.createElement("canvas"),r=i.getContext("2d");return function(){i.width=f,i.height=p*n,i.style.width=i.width+"px",i.style.height=i.height+"px",i.className="rs-canvas",e.appendChild(i),r.fillStyle="#444444",r.fillRect(0,0,i.width,i.height)}(),{draw:a}}function r(e,t){function n(e){if(S&&S.average){v+=e,w++;var t=performance.now();t-_>=(S.avgMs||1e3)&&(g=v/w,v=0,_=t,w=0)}}function i(){d=performance.now(),c.userTimingAPI&&performance.mark(p+"-start"),C=!0}function r(){f=performance.now()-d,c.userTimingAPI&&(performance.mark(p+"-end"),C&&performance.measure(p,p+"-start",p+"-end")),n(f)}function o(){r(),i()}function s(){var e=S&&S.average?g:f;k.nodeValue=Math.round(100*e)/100;var t=S&&(S.below&&f<S.below||S.over&&f>S.over);x.draw(f,t),y.style.color=t?"#b70000":"#ffffff"}function l(){var e=performance.now(),t=e-d;m++,t>1e3&&(f=S&&!1===S.interpolate?m:1e3*m/t,m=0,d=e,n(f))}function u(e){f=e,n(f)}var d,p=e,f=0,m=0,g=0,v=0,_=performance.now(),w=0,y=document.createElement("div"),M=document.createElement("span"),b=document.createElement("div"),k=document.createTextNode(""),S=c?c.values[p.toLowerCase()]:null,x=new a(y,p,S),C=!1;return y.className="rs-counter-base",M.className="rs-counter-id",M.textContent=S&&S.caption?S.caption:p,b.className="rs-counter-value",b.appendChild(k),y.appendChild(M),y.appendChild(b),t?t.div.appendChild(y):h.appendChild(y),d=performance.now(),{set:u,start:i,tick:o,end:r,frame:l,value:function(){return f},draw:s}}function o(e){var n=e.toLowerCase();if(void 0===n&&(n="default"),m[n])return m[n];var a=null;c&&c.groups&&t(c.groups,function(e){var t=c.groups[parseInt(e,10)];a||-1===t.values.indexOf(n.toLowerCase())||(a=t)});var i=new r(n,a);return m[n]=i,i}function s(){t(c.plugins,function(e){c.plugins[e].update()}),t(m,function(e){m[e].draw()}),c&&c.fractions&&t(c.fractions,function(e){var n=c.fractions[parseInt(e,10)],a=[],i=m[n.base.toLowerCase()];i&&(i=i.value(),t(c.fractions[e].steps,function(t){var n=c.fractions[e].steps[parseInt(t,10)].toLowerCase(),r=m[n];r&&a.push(r.value()/i)})),n.graph.draw(a)})}var c=e||{},l=c.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],u=(c.CSSPath?c.CSSPath:"")+"rStats.css";(c.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",u]).forEach(function(e){n(e)}),c.values||(c.values={});var d,h,p=10,f=200,m={};return function(){if(c.plugins){c.values||(c.values={}),c.groups||(c.groups=[]),c.fractions||(c.fractions=[]);for(var e=0;e<c.plugins.length;e++)c.plugins[e].attach(o),t(c.plugins[e].values,function(t){c.values[t]=c.plugins[e].values[t]}),c.groups=c.groups.concat(c.plugins[e].groups),c.fractions=c.fractions.concat(c.plugins[e].fractions)}else c.plugins={};d=document.createElement("div"),d.className="rs-base",h=document.createElement("div"),h.className="rs-container",h.style.height="auto",d.appendChild(h),document.body.appendChild(d),c&&(c.groups&&t(c.groups,function(e){var t=c.groups[parseInt(e,10)],n=document.createElement("div");n.className="rs-group",t.div=n;var a=document.createElement("h1");a.textContent=t.caption,a.addEventListener("click",function(e){this.classList.toggle("hidden"),e.preventDefault()}.bind(n)),h.appendChild(a),h.appendChild(n)}),c.fractions&&t(c.fractions,function(e){var n=c.fractions[parseInt(e,10)],a=document.createElement("div");a.className="rs-fraction";var r=document.createElement("div");r.className="rs-legend";var o=0;t(c.fractions[e].steps,function(t){var n=document.createElement("p");n.textContent=c.fractions[e].steps[t],n.style.color=l[o],r.appendChild(n),o++}),a.appendChild(r),a.style.height=o*p+"px",n.div=a;var s=new i(a,o);n.graph=s,h.appendChild(a)}))}(),function(e){return e?o(e):{element:d,update:s}}},e.exports=window.rStats},1662:function(e,t,n){window.glStats=function(){function e(e,t){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function t(){r("allcalls").set(o+s),r("drawElements").set(s),r("drawArrays").set(o),r("bindTexture").set(h),r("useProgram").set(c),r("glfaces").set(l),r("glvertices").set(u),r("glpoints").set(d)}function n(){o=0,s=0,c=0,l=0,u=0,d=0,h=0}function a(){}function i(e){r=e}var r=null,o=0,s=0,c=0,l=0,u=0,d=0,h=0;return WebGLRenderingContext.prototype.drawArrays=e(WebGLRenderingContext.prototype.drawArrays,function(){o++,arguments[0]==this.POINTS?d+=arguments[2]:u+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=e(WebGLRenderingContext.prototype.drawElements,function(){s++,l+=arguments[1]/3,u+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=e(WebGLRenderingContext.prototype.useProgram,function(){c++}),WebGLRenderingContext.prototype.bindTexture=e(WebGLRenderingContext.prototype.bindTexture,function(){h++}),{update:t,start:n,end:a,attach:i,values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(e){function t(){r("renderer.info.memory.geometries").set(e.info.memory.geometries),r("renderer.info.programs").set(e.info.programs.length),r("renderer.info.memory.textures").set(e.info.memory.textures),r("renderer.info.render.calls").set(e.info.render.calls),r("renderer.info.render.faces").set(e.info.render.faces),r("renderer.info.render.points").set(e.info.render.points),r("renderer.info.render.vertices").set(e.info.render.vertices)}function n(){}function a(){}function i(e){r=e}var r=null;return{update:t,start:n,end:a,attach:i,values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.faces":{caption:"Faces",over:1e3},"renderer.info.render.points":{caption:"Points"},"renderer.info.render.vertices":{caption:"Vertices"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.faces","renderer.info.render.points","renderer.info.render.vertices"]}],fractions:[]}},window.BrowserStats=function(){function e(e){var t=Math.floor(Math.log(e)/h);return Math.round(100*e/Math.pow(1024,t))/100}function t(){o=e(c.usedJSHeapSize),s=e(c.totalJSHeapSize),r("memory").set(o),r("total").set(s)}function n(){o=0}function a(){}function i(e){r=e}var r=null,o=0,s=0,c={usedJSHeapSize:0,totalJSHeapSize:0};window.performance&&performance.memory&&(c=performance.memory),0===c.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var l={memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},u=[{caption:"Browser",values:["memory","total"]}],d=[{base:"total",steps:["memory"]}],h=Math.log(1024);return{update:t,start:n,end:a,attach:i,values:l,groups:u,fractions:d}},e.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats}},1663:function(e,t,n){"use strict";var a=(n(1664),n(0)),i=(n.n(a),n(168)),r=n(59),o=n(20),s=n(1463);t.a=i.a.extend({routes:Object(a.extend)({},i.a.prototype.routes,{"models/:modelUid/embed":"embed"}),embed:function(e){e=o.b.string("model",e),r.a.get(e).then(function(e){new s.a({model:e,el:"body"})})}})},1664:function(e,t,n){"use strict";var a=n(334);Object(a.default)(!0)},1665:function(e,t,n){"use strict";t.a=function(){var e=["Float32Array","Uint32Array","Int32Array","Uint16Array","Int16Array","Uint8Array","Int8Array"];for(var t in e)window[e[t]]=function(){return[]}}},168:function(e,t,n){"use strict";var a=n(25),i=n.n(a);t.a=i.a.Router},290:function(e,t,n){e.exports={default:n(299),__esModule:!0}},294:function(e,t,n){"use strict";var a=n(4),i=n.n(a);t.a=function(){i()(document).on("focus blur","*",function(e){var t=i()(e.target).attr("id"),n=e.target===document.activeElement;void 0!==t&&i()("label[for]").filter(function(){return i()(this).attr("for")===t}).toggleClass("focused",n)}),i()(document).on("input","input, textarea",function(e){i()(e.target).addClass("edited").toggleClass("empty",""===i()(e.target).val())}),i()(document).on("submit","form:not([action])",function(e){e.preventDefault()}),i()(".hover-menu").css("display","none"),i()(document.documentElement).addClass("ready"),i()(document).on("keydown","form textarea",function(e){e.ctrlKey&&13===e.keyCode&&i()(e.target).closest("form").submit()}),i()(document).on("click","[data-link]",function(e){(e.currentTarget!==e.target?i()(e.target).parentsUntil(e.currentTarget):i()()).andSelf().filter("a, [data-link], [data-action]").length>0||(e.metaKey||e.ctrlKey?window.open(i()(e.currentTarget).attr("data-link")):document.location=i()(e.currentTarget).attr("data-link"))}),i()(document).on("click","a",function(e){if(0!==(e.currentTarget!==e.target?i()(e.target).parentsUntil(e.currentTarget):i()()).andSelf().filter("[data-link], [data-action]").length){var t=i()(e.target).parents().filter("[href]");0!==t.length&&"#"!==t.eq(0).attr("href")||e.preventDefault()}}),i()(document).on("mousedown","label[for]",function(e){if(e.target===e.currentTarget){var t=i()(e.currentTarget).attr("for"),n=document.getElementById(t);n&&n===document.activeElement&&e.preventDefault()}}),i()(document).on("mouseover",":has(> .hover-menu)",function(e){var t=i()(e.currentTarget);t.children(".hover-menu").css("display",""),i()(".hover-menu").not(t.parents(".hover-menu")).not(t.find(".hover-menu")).css("display","none")})}},299:function(e,t,n){n(300),e.exports=n(22).Object.values},300:function(e,t,n){var a=n(31),i=n(292)(!1);a(a.S,"Object",{values:function(e){return i(e)}})},309:function(e,t,n){"use strict";var a=n(33);window.webpackManifest=Object(a.j)("webpack-manifest","json")},311:function(e,t,n){"use strict";var a=n(3),i=n(33),r=Object(i.j)("trackers-options","json"),o=function(){try{var e=r.unauthorizedReferrers||[],t=(document.cookie+";").match(/skfb_referrer_override=(.*?);/i),n=document.referrer,a=!1;return t=t&&t.length>1?t[1]:"",t=decodeURIComponent(t),e.forEach(function(e){a||(a=!!n.match(e))}),a&&(console.info("Overriding referrer with : ",t),ga("set","referrer",t)),!!a&&t}catch(e){return console.error(e),!1}},s=function(e){var t=a.a.me().toJSON();!function(e,t,n,a,i,r,o){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,r=t.createElement(n),o=t.getElementsByTagName(n)[0],r.async=1,r.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(r,o)}(window,document,"script",0,"ga"),t&&t.isStaff&&(window["ga-disable-"+e.uid]=!0),t&&!t.isAnonymous?ga("create",e.uid,{userId:t.uid}):ga("create",e.uid);var n=o();if(!1!==n&&ga("set","referrer",n),t&&!t.isAnonymous){var i,r;t.segment?(i=t.segment.name,r=t.segment.kind):(i="None",r="None"),ga("set",{dimension1:t.account,dimension3:t.createdAt,dimension4:t.billingCycle,dimension5:i,dimension6:r,metric1:t.modelCount,metric2:t.likeCount,metric3:t.followingCount})}window.optimizely=window.optimizely||[],window.optimizely.push("activateUniversalAnalytics"),e.trackPageview&&ga("send","pageview")},c=function(e){!function(e,t,n,a,i){e[a]=e[a]||[],e[a].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var r=t.getElementsByTagName(n)[0],o=t.createElement(n);o.defer=!0,o.src="//www.googletagmanager.com/gtm.js?id="+i,r.parentNode.insertBefore(o,r)}(window,document,"script","dataLayer",e.uid)},l=function(e){var t=a.a.me().toJSON();if(function(e,t){if(!t.__SV){var n,a,i,r;window.mixpanel=t,t._i=[],t.init=function(e,n,a){var o=t;for(void 0!==a?o=t[a]=[]:a="mixpanel",o.people=o.people||[],o.toString=function(e){var t="mixpanel";return"mixpanel"!==a&&(t+="."+a),e||(t+=" (stub)"),t},o.people.toString=function(){return o.toString(1)+".people (stub)"},i="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" "),r=0;r<i.length;r++)!function(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}(o,i[r]);t._i.push([e,n,a])},t.__SV=1.2,n=e.createElement("script"),n.type="text/javascript",n.async=!0,n.src="undefined"!=typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js",a=e.getElementsByTagName("script")[0],a.parentNode.insertBefore(n,a)}}(document,window.mixpanel||[]),mixpanel.init(e.token),t&&t.isStaff&&mixpanel.register({$ignore:!0}),t&&!t.isAnonymous){var n,i;t.segment?(n=t.segment.name,i=t.segment.kind):(n="None",i="None");var r={"User UID":t.uid,Account:t.account,"Billing Cycle":t.billingCycle,"User Segment Name":n,"User Segment Kind":i},s=o();!1!==s&&(r.referrer=s),mixpanel.identify(t.uid),mixpanel.register(r)}};t.a=function(){r&&r.googleAnalytics&&s(r.googleAnalytics),r&&r.mixpanel&&l(r.mixpanel),r&&r.googleTagManager&&c(r.googleTagManager)}},77:function(e,t,n){"use strict";var a=n(290),i=n.n(a),r=n(85),o=n.n(r),s=n(86),c=n.n(s),l=n(79),u=n.n(l),d=n(9),h=n.n(d),p=n(5),f=n.n(p),m=n(0),g=(n.n(m),n(20)),v=n(51),_=void 0,w=function(){return _||(_=new f.a(function(e){!function t(){window.mixpanel?e(window.mixpanel):setTimeout(t,500)}()}).timeout(5e3)),_};t.a={track:function(e,t){return w().then(function(n){return new f.a(function(a){return n.track(e,h()({},t),a)})}).timeout(1e3).catch(function(t){console.error(t),console.info("Tracking event skipped : "+u()(e))})},identify:function(){function e(e){return t.apply(this,arguments)}var t=c()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w();case 3:n=e.sent,n.identify(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.info("couldn't load mixpanel");case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return e}(),setSegment:function(){function e(e){return t.apply(this,arguments)}var t=c()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w();case 3:n=e.sent,n.register({"User Segment Name":t?t.get("name"):"None","User Segment Kind":t?t.get("kind"):"None"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.info("couldn't load mixpanel");case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return e}(),setUsageType:function(){function e(e){return t.apply(this,arguments)}var t=c()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w();case 3:n=e.sent,n.register({"User Usage Type":t||"None"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.info("couldn't load mixpanel");case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return e}(),trackSignup:function(){return this.track("Signup")},trackSignupForm:function(){return this.track("Open signup form")},trackUploadForm:function(){return this.track("Open upload form")},trackOnboardingStep:function(e,t){return this.track("Onboarding - Open "+e+" step",t)},clearCookie:function(){function e(){return t.apply(this,arguments)}var t=c()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w();case 3:t=e.sent,t.reset(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.info("couldn't load mixpanel");case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return e}(),collectLastTouchUTMs:function(){function e(){return t.apply(this,arguments)}var t=c()(o.a.mark(function e(){var t,n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w();case 3:t=e.sent,n={utm_source:g.b.string("utm_source"),utm_medium:g.b.string("utm_medium"),utm_campaign:g.b.string("utm_campaign"),utm_content:g.b.string("utm_content"),utm_term:g.b.string("utm_term")},a="has_mixpanel_last_touch",i()(n).some(function(e){return!!e})?(t.register(n),v.a.set(a,"true",{expires:864e5})):v.a.get(a)||t.register(Object(m.mapValues)(n,function(){return""})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.info("couldn't load mixpanel");case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return e}()}},849:function(e,t,n){"use strict";var a=n(5),i=n.n(a),r=n(25),o=n.n(r),s=n(20),c=n(59),l=n(14),u=n(21),d=n(357),h=function(){if("dev"!==l.a.buildMode){var e=!1;if(l.a.prodHookDomainsBlacklist.forEach(function(t){document.location.href.indexOf(t)>-1&&(e=!0)}),e)return}if(-1!==window.location.search.substr(1).indexOf("hook_")){for(var t,n="hook_".length,a=window.location.search.substr(1).split(/&+/g),i=0;i<a.length;++i){var r=a[i];if(-1!==r.indexOf("hook_")){t=r.substr(n,r.indexOf("=")-n);break}}if(t&&s.b.bool("hook_"+t)){var o="https://";return o+="prod"===t?"sketchfab.com":"fatvoxel"===t?"fatvoxel.com":t+".fatvoxel.com"}}},p=function(e,t){var n=new o.a.Model;return n.url=e+t,n.fetch().then(function(e){return window.prefetchedData[t]=e,e})},f=function(e,t){for(var n=["","animations","backgrounds","environments","hotspots","matcaps","sounds","textures"],a=[],r=0;r<n.length;++r){var o=Object(d.a)(n[r],t);a.push(p(e,o))}return i.a.all(a).then(function(e){return new c.a(e[0])})},m=function(){var e=h();if(e){var t=Object(u.a)().model;if(t){var n=f(e,t);c.a.get=function(){return n}}}};t.a=m},850:function(e,t,n){"use strict";var a=n(8),i=n(0),r=(n.n(i),n(1379)),o=n(76),s=n(42),c=n(1380),l=n(851),u=n(152),d=n(434),h=a.a.osg,p=a.a.osgAnimation,f=function(e){this._partial=e,this._events={},this._replayEmitter=new c.a,this._partial.on("model-loaded",function(){this._emitEvents()}.bind(this)),this._sceneGraphVisitor=new r.a,this._nodeMap=void 0};f.prototype={_filterAnnotationModelMessage:function(e){delete e.refreshAction,delete e.sticky},addGlobalListener:function(e){this._replayEmitter.subscribe(e)},intersectPoint:function(e,t,n,a){var i=this._getFeatureModel("material"),r=i.findFirstMaterial(e._nodePath);this._replayEmitter.emit("click",{position3D:t,position2D:n,normal:a,instanceID:e._nodePath[e._nodePath.length-1].getInstanceID(),material:r?r.getJSON():null})},_getFeatureModel:function(e){var t=this._partial.scene.getFeatures()[e];if(t)return t.getModel()},_getViewerOSG:function(){return this._getViewer()._viewer},_getViewer:function(){return this._partial.scene},_emitEvents:function(){var e=["viewerready","annotationFocus","annotationBlur","click"];this._partial.scene.on("all",function(t,n){-1!==e.indexOf(t)&&this._replayEmitter.emit(t,n)}.bind(this)),this.emitEvents=function(){}},_computeSceneGraph:function(){var e=this._sceneGraphVisitor;e.isDirty()&&this._getViewer().getRootModel().accept(e)},_getRootNode:function(){return this._computeSceneGraph(),this._sceneGraphVisitor.getRootNode()},_getRealNodeMap:function(){return this._computeSceneGraph(),this._sceneGraphVisitor.getRealNodeMap()},_getRepresentationNodeMap:function(){return this._computeSceneGraph(),this._sceneGraphVisitor.getRepresentationNodeMap()},_convertDataUriToImage:function(e,t,n){var a=this._getFeatureModel("material").getImageCollection();o.default.instance.getOrCreateImage(e).promise.then(function(i){var r=a.addNewImage({uid:t,url:e,width:i.getWidth(),height:i.getHeight(),name:e.slice(0,100)});n(null,r.getUID())}).catch(function(){n("failed to add texture")})},start:function(e){this._partial.start(),e(null)},stop:function(e){this._partial.stop(),e(null)},load:function(e){this._partial.load(),e(null)},gotoAnnotation:function(e,t){var n=this._getFeatureModel("hotspot").get("hotspots"),a=n.at(e);n.trigger("select",a),t(null,e)},getAnnotationList:function(e){var t=this._getFeatureModel("hotspot"),n=t.get("hotspots"),a=n.toJSON();a.forEach(this._filterAnnotationModelMessage.bind(this)),e(null,a)},lookat:function(e,t,n,a){this.setCameraLookAt(e,t,n,a)},setFov:function(e,t){var n=this._getFeatureModel("camera"),a=n.setJSON({fov:e});t(a.length?a:null,e)},getCurrentTime:function(e){var t=this._getFeatureModel("animation"),n=t.getCurrentAnimation(),a=n.get("duration");e(null,t.get("progress")*a/100)},play:function(e){this._getFeatureModel("animation").set("playing",!0),e(null)},pause:function(e){var t=this._getFeatureModel("animation");if(!t)return void e("no animation feature");t.set("playing",!1),e(null)},seekTo:function(e,t){var n=this._getFeatureModel("animation"),a=n.getCurrentAnimation().get("duration"),i=100*e/a;n.trigger("seek",i),t(null)},getAnimations:function(e){var t=this._getFeatureModel("animation"),n=[];t.get("animations").forEach(function(e){var t=[];t.push(e.get("uid")),t.push(e.get("name")),t.push(e.get("duration")),n.push(t)}),e(null,n)},setCurrentAnimationByUID:function(e,t){this._getFeatureModel("animation").set("currentUID",e),t(null)},setCycleMode:function(e,t){var n=this._getFeatureModel("animation");1===n.get("animations").length&&"all"===e&&(e="one");var a=n.setJSON({cycleMode:e},{validate:!0,warnOnError:!0});t(a&&a.length?a:null)},setSpeed:function(e,t){var n=this._getFeatureModel("animation"),a=n.setJSON({speed:e},{validate:!0,warnOnError:!0});t(a&&a.length?a:null,e)},getSceneGraph:function(e){e(null,this._getRootNode())},getNodeMap:function(e){e(null,this._getRepresentationNodeMap())},getNodeMask:function(e,t){var n=this._getRealNodeMap(),a=n[e];a?t(null,a.getNodeMask()):t("node with id "+e.toString()+" not found")},getMatrix:function(e,t){var n=this._getRealNodeMap(),a=n[e];a?t(null,{local:a.getMatrix(),world:a.getWorldMatrices()[0]}):t("node with id "+e.toString()+" not found")},setMatrix:function(e,t,n){var a=this._getRealNodeMap(),i=a[e];h.mat4.copy(i.getMatrix(),t),i.dirtyBound(),n(null),s.a.redrawShadow()},hide:function(e,t){var n=this._getRealNodeMap(),a=n[e];a?(a.setNodeMask(0),t(null)):t("show: node id "+e+" not found"),s.a.redrawShadow()},show:function(e,t){var n=this._getRealNodeMap(),a=n[e];a?(a.setNodeMask(-1),t(null)):t("show: node id "+e+" not found"),s.a.redrawShadow()},translate:function(){var e,t,n=arguments.length,a=arguments[n-1],i=arguments[0],r=arguments[1];4===n?e=arguments[2]:5===n&&(e=arguments[2],t=arguments[3]),e=e||0;var o=p[t]||p.easeOutQuad,c=this._getRealNodeMap(),u=c[i];if(u.getTypeID()!==h.MatrixTransform.typeID)return void a("you can only translate MatrixTransform nodes");if(e>0){var d=h.vec3.create();h.mat4.getTranslation(d,u.getMatrix());var f=new l.c(d,r,e,o,function(e){u.removeUpdateCallback(f),a(null,e)});u.addUpdateCallback(f)}else h.mat4.setTranslation(u.getMatrix(),r),u.dirtyBound(),a(null,r);s.a.redrawShadow()},rotate:function(){var e=h.vec3.create(),t=h.vec3.create();return function(){var n,a,i=arguments.length,r=arguments[i-1],o=arguments[0],c=arguments[1];4===i?n=arguments[2]:5===i&&(n=arguments[2],a=arguments[3]),n=n||0;var u=p[a]||p.easeOutQuad,d=this._getRealNodeMap();if(d[o].getTypeID()!==h.MatrixTransform.typeID)return void r("you can only translate MatrixTransform nodes");var f=h.quat.create(),m=h.mat4.create();h.mat4.fromRotation(m,-c[0],h.vec3.set(t,c[1],c[2],c[3])),h.mat4.getRotation(f,m);var g=d[o];if(n>0){var v=h.quat.create();h.mat4.getRotation(v,g.getMatrix());var _=new l.a(v,f,n,u,function(e){g.removeUpdateCallback(_),r(null,e)});d[o].addUpdateCallback(_)}else h.mat4.fromQuat(m,f),h.mat4.getTranslation(e,g.getMatrix()),h.mat4.setTranslation(m,e),h.mat4.copy(g.getMatrix(),m),g.dirtyBound(),r(null,c);s.a.redrawShadow()}}(),getRootMatrixNode:function(e){var t=this._getViewer().getRootModel();if(t||e("No scene loaded"),!this._nodeInTheMiddle){this._nodeInTheMiddle=new h.MatrixTransform,this._nodeInTheMiddle.setName("NITM");for(var n=t.getChildren(),a=0,i=n.length;a<i;a++)this._nodeInTheMiddle.addChild(n[a]);t.removeChildren(),t.addChild(this._nodeInTheMiddle)}e(null,this._nodeInTheMiddle.getInstanceID(),this._nodeInTheMiddle.getMatrix())},getCameraLookAt:function(e){var t=this._getViewerOSG().getManipulator(),n=[],a=[];t.getTarget(n),t.getEyePosition(a),e(null,{position:a,target:n})},setCameraLookAt:function(e,t){var n=this._getFeatureModel("camera"),a=this._getViewerOSG().getManipulator(),i=arguments[arguments.length-1],r=3===arguments.length?2:arguments[2];r<=0?a.setTargetAndEye(t,e):(n.setTargetAndEye(t,e),n.set("animationDuration",r)),i(null)},getScreenShot:function(){var e,t,n=arguments.length,a=arguments[n-1],i="image/jpeg";if(2===n)i=arguments[0];else if(3===n)e=Math.floor(arguments[0]),t=Math.floor(arguments[1]);else if(4===n)e=Math.floor(arguments[0]),t=Math.floor(arguments[1]),i=arguments[2];else if(1!==n)return void a("Wrong number of arguments, signature should be (width, height, [callback]), (width, height, mimetype, [callback]), (mimetype, [callback]) or ([callback]).");a(null,this._getViewer().getScreenShot(e,t).toDataURL(i))},getMaterialList:function(e){var t=this._getFeatureModel("material");e(null,Object(i.values)(t.getJSON()))},getTextureList:function(e){e(null,this._getFeatureModel("material").getImageCollection().toJSON())},addTexture:function(e,t){this._convertDataUriToImage(e,void 0,t)},updateTexture:function(e,t,n){this._convertDataUriToImage(e,t,function(e){if(e)return void n(e);var a=this._getFeatureModel("material").getMaterials();for(var i in a){var r=a[i],o=r.getChannels();for(var s in o){var c=o[s],l=c.getTextureModel();l&&l.getUID()===t&&c.trigger("updateChannel")}}n(null,t)}.bind(this))},setTextureQuality:function(e,t){var n=this._getFeatureModel("quality");n.get("promiseReady").then(function(a){var r={ld:0,sd:1,hd:2};if(a.high||(r={ld:0,hd:1}),a.mid||(r={hd:0}),e in r){var o=r[e];n.set("level",o),t(null,"texture quality set to "+o)}else{var s=Object(i.map)(r,function(e,t){return t}).join(", ");t(['Quality must be a string "ld", "sd" or "hd".'," Available qualities for this model are : ",s].join(""),null)}}.bind(this))},setMaterial:function(e,t){var n=this._getFeatureModel("material"),a=e.stateSetID,i=n.getMaterialByStateSetID(a);i.setMaterialJSON(e,n.getImageCollection(),{validate:!0,warnOnError:!0}),i.trigger("apply"),s.a.redrawShadow(),t(null)},setPostProcessing:function(e,t){this._getFeatureModel("postProcess").set(e),t(null)},getPostProcessing:function(e){e(this._getFeatureModel("postProcess").toJSON())},getWorldToScreenCoordinates:function(e,t){var n=u.a.getScreenPositionFromWorldPoint(e);t({glCoord:n.slice(0,2),canvasCoord:d.a.glCoordToCanvas(n[0],n[1],n).slice(0,2)})}},t.a=f},851:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return l});var a=n(42),i=n(8),r=i.a.osg,o=function(e){this._translateUpdateCallbackListPerNode={},this._rotateUpdateCallbackListPerNode={},this._nodeList=e};o.prototype={addTranslateUpdateCallback:function(e,t,n){var a=this._translateUpdateCallbackListPerNode[n];a&&(r.mat4.setTranslation(e.getMatrix(),a._target),t._source=a._target),this._translateUpdateCallbackListPerNode[n]=t},addRotateUpdateCallback:function(e,t,n){var a=this._rotateUpdateCallbackListPerNode[n];if(a){var i=a._target,o=r.mat4.create(),s=r.vec3.create();r.mat4.fromQuat(o,i),r.mat4.getTranslation(s,e.getMatrix()),r.mat4.setTranslation(o,s),r.mat4.copy(e.getMatrix(),o),t._source=a._target}this._rotateUpdateCallbackListPerNode[n]=t},removeTranslateUpdateCallback:function(e){delete this._translateUpdateCallbackListPerNode[e]},removeRotateUpdateCallback:function(e){delete this._rotateUpdateCallbackListPerNode[e]},update:function(e,t){var n,a,i;for(a in this._rotateUpdateCallbackListPerNode)n=this._rotateUpdateCallbackListPerNode[a],i=this._nodeList[a],n.update(i,t);for(a in this._translateUpdateCallbackListPerNode)n=this._translateUpdateCallbackListPerNode[a],i=this._nodeList[a],n.update(i,t);return!0}};var s=function(e,t,n,a,i){this._source=e,this._target=t,this._duration=n,this._started=-1,this._easing=a,this._finished=!1,this._callback=i};s.prototype={isFinished:function(){return this._finished},update:function(e,t){if(this._finished)return!0;a.a.redrawShadow();var n=t.getFrameStamp().getSimulationTime();this._started<0&&(this._started=n);var i=(n-this._started)/this._duration;return i>1&&(this._finished=!0,this._callback&&this._callback(this._result),i=1),this._easing&&(i=this._easing(i)),this.interpolate(i,e),!0}};var c=function(e,t,n,a,i){s.call(this,e,t,n,a,i),this._result=r.vec3.create()};c.prototype=r.objectInherit(s.prototype,{interpolate:function(e,t){r.vec3.lerp(this._result,this._source,this._target,e),r.mat4.setTranslation(t.getMatrix(),this._result),t.dirtyBound()}});var l=function(e,t,n,a,i){s.call(this,e,t,n,a,i),this._result=r.quat.create(),this._translate=r.vec3.create(),this._finalResult=r.mat4.create()};l.prototype=r.objectInherit(s.prototype,{interpolate:function(e,t){r.quat.slerp(this._result,this._source,this._target,e),r.mat4.getTranslation(this._translate,t.getMatrix()),r.mat4.fromQuat(this._finalResult,this._result),r.mat4.setTranslation(this._finalResult,this._translate),r.mat4.copy(t.getMatrix(),this._finalResult),t.dirtyBound()}})},852:function(e,t,n){"use strict";var a=n(429),i=n.n(a),r=n(8),o=n(152),s=n(190),c=n(65),l=n(115),u=n(102),d=n(49),h=n(850),p=n(42),f=n(0),m=(n.n(f),r.a.osg),g=function(){h.a.apply(this,arguments),this._displayed=!1,d.a.getModelDisplayed().then(function(){this._displayed=!0}.bind(this)),this._pickMask={click:c.a.PICK_GEOMETRY_FAST,mousemove:c.a.PICK_GEOMETRY_FAST}};g.prototype=Object(f.create)(h.a.prototype,{addGlobalListener:function(e){u.a.getBoxReady().then(function(){s.a.initViewerAPI(this),this._getViewer().getInputManager().setEnable(l.a.SCENE_VIEWERAPI,!0)}.bind(this)),this._replayEmitter.subscribe(e)},intersectPoint:void 0,_emitEvents:function(){var e={viewerready:"viewerready",started:"viewerstart",stopped:"viewerstop",annotationFocus:"annotationFocus",annotationBlur:"annotationBlur",annotationMouseEnter:"annotationMouseEnter",annotationMouseLeave:"annotationMouseLeave",annotationSelect:"annotationSelect",nodeMouseEnter:"nodeMouseEnter",nodeMouseLeave:"nodeMouseLeave",click:"click",cameraStart:"camerastart",cameraStop:"camerastop"},t=function(t,n){var a=e[t];a&&this._replayEmitter.emit(a,n)}.bind(this);this._partial.on("all",t),this._partial.scene.on("all",t),this._emitEvents=function(){}},onCursorUp:function(){var e=m.vec3.create(),t=m.vec3.create(),n=m.vec2.create();return function(a){if(this._displayed){n[0]=a.canvasX,n[1]=a.canvasY;var i=o.a.computeNearestIntersection2D(n[0],n[1],this._pickMask.click),r={position3D:null,position2D:n,normal:null,instanceID:null,material:null};if(!i)return void this._replayEmitter.emit("click",r);o.a.getWorldPositionFromHit(i,t,e);var s=this._getFeatureModel("material").findFirstMaterial(i._nodePath);r.normal=e,r.position3D=t,r.instanceID=i._nodePath[i._nodePath.length-1].getInstanceID(),r.material=s?s.getJSON():null,this._replayEmitter.emit("click",r)}}}(),onMouseMove:function(){var e,t,n=m.vec3.create(),a=m.vec3.create(),i=m.vec2.create();return function(r){if(this._displayed){i[0]=r.canvasX,i[1]=r.canvasY;var s=o.a.computeNearestIntersection2D(i[0],i[1],this._pickMask.click);if(s){o.a.getWorldPositionFromHit(s,a,n);var c=s._nodePath[s._nodePath.length-1].getInstanceID(),l=this._getFeatureModel("material"),u=l.findFirstMaterial(s._nodePath);if(t===c)return;return t&&this._replayEmitter.emit("nodeMouseLeave",{position3D:null,position2D:null,normal:n,instanceID:t,material:e}),t=c,e=u?u.getJSON():null,void this._replayEmitter.emit("nodeMouseEnter",{position3D:a,position2D:i,normal:n,instanceID:t,material:e})}t&&(this._replayEmitter.emit("nodeMouseLeave",{position3D:a,position2D:i,normal:n,instanceID:t,material:e}),t=void 0,e=void 0)}}}(),setListenerOptions:function(e){if(e&&"function"!=typeof e)switch(e.name){case"click":this._pickMask.click="slow"===e.pick?c.a.PICK_GEOMETRY_SLOW:c.a.PICK_GEOMETRY_FAST;break;case"nodeMouseEnter":case"nodeMouseLeave":this._pickMask.mousemove="slow"===e.pick?c.a.PICK_GEOMETRY_SLOW:c.a.PICK_GEOMETRY_FAST}},pickColor:function(){var e=new Uint8Array(4);return function(t,n){new i.a(function(n,a){var i=this._getViewerOSG().getCamera();i.setFinalDrawCallback(function(r){var o=r.getGraphicContext();if(o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE)return void a();o.flush(),o.finish();var s=t[0]*(o.drawingBufferWidth/o.canvas.clientWidth),c=o.drawingBufferHeight*(1-t[1]/o.canvas.clientHeight);o.readPixels(s,c,1,1,o.RGBA,o.UNSIGNED_BYTE,e),n(e),i.setFinalDrawCallback(void 0)})}.bind(this)).then(function(){n(e)})}}(),unselectAnnotation:function(e){this.gotoAnnotation(-1,e)},requestRedraw:function(){p.a.redrawShadow()}}),t.a=g}},[1658])});
//# sourceMappingURL=embed-e593cfbc2d6d751c8355.js.map