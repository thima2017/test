webpackJsonp([29],{117:function(t,i,e){"use strict";var s=e(7),o=e(3);i.a=s.a.extend({isReady:!1,initialize:function(){if(s.a.prototype.initialize.apply(this,arguments),this.$el.addClass("btn-loading btn-disabled"),this.$el.find(".button").addClass("btn-disabled"),!o.a.me().isAuthenticated())return void this.setIsReady()},setIsReady:function(){this.isReady=!0,this.isLoading=!1,this.$el.removeClass("btn-loading btn-disabled"),this.$el.find(".button").removeClass("btn-disabled")},setIsLoading:function(){this.isReady=!1,this.isLoading=!0}})},126:function(t,i,e){"use strict";var s=e(3),o=e(12),n=e(117),l=e(1);i.a=n.a.extend({displayName:"FollowButton",optionTypes:{size:l.b.oneOf(["small","medium","large","huge"]).isRequired,afterFollowAction:l.b.func.isRequired,userUid:l.b.string,trackerEvent:l.b.string},defaultOptions:{userUid:null,trackerEvent:null,size:"medium",afterFollowAction:function(){}},events:{click:"followAction"},initialize:function(){n.a.prototype.initialize.apply(this,arguments),this.options.userUid=this.$el.attr("data-user");var t=s.a.me();if(!t.isAuthenticated()||t.uid!==this.options.userUid){t.on("change:followings",this.render,this);void 0!==t.get("followings")[this.options.userUid]&&this.render(),this.populate()}},setElement:function(){return n.a.prototype.setElement.apply(this,arguments),this.setOptions({userUid:this.$el.attr("data-user")}),this.$el.find(".button").addClass("btn-"+this.options.size),this},populate:function(){var t=this;s.a.me().getDoesFollow(this.options.userUid).then(function(){return t.render()})},followAction:function(t){t.stopPropagation(),this.isReady&&!this.isLoading&&(this.setIsLoading(),s.a.authenticate(function(t){var i=t.doesFollow(this.options.userUid),e=i?"unfollow":"follow";return this.toggle(!i,!0),null!==this.options.trackerEvent&&o.a[this.options.trackerEvent](this.options.userUid,"follow"===e),t[e](this.options.userUid).then(function(){this.options.afterFollowAction(e),this.setIsReady()}.bind(this))}.bind(this)).catch(function(){this.setIsReady()}.bind(this)))},toggle:function(t,i){var e=this.$el;e.toggleClass("toggled",t),void 0!==i&&i&&e.addClass("just-clicked").mouseleave(function(){e.removeClass("just-clicked")})},render:function(){this.toggle(s.a.me().doesFollow(this.options.userUid)),this.isLoading||this.setIsReady()}})},208:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e(4),o=e.n(s),n=e(0),l=(e.n(n),e(2)),a=e(7),d=e(126),r=e(3),h=e(16);e.n(h);i.default=a.a.extend({template:l.default.getFromMacro("skfb_front/macros/user","user_summary"),className:"user-summary hidden",initialize:function(){a.a.prototype.initialize.apply(this,arguments),o()("body").append(this.$el),this.model=new r.a,this.model.on("change",this.render.bind(this))},render:function(){this.$el.html(this.template([r.a.me().toJSON(),this.model.toJSON(),this.userOptions])),!1!==this.userOptions.followButton&&new d.a({el:this.$(".follow-user-button")[0],trackerEvent:"userSummaryFollowButtonClicked",afterFollowAction:this.onUserFollow.bind(this)})},setUser:function(t,i){i=i||{},this.userOptions=i,this.$el.addClass("loading"),this.model.clear({silent:!0}).set({uid:t},{silent:!0}).getSummary().then(function(){this.$el.removeClass("loading")}.bind(this))},onUserFollow:function(t){var i="follow"===t?1:-1,e=this.$(".follow-count span"),s=parseInt(e.text(),10);e.text(s+i)},anchor:function(t){var i=o()(t),e=this.$el.outerWidth(!0),s=o()(window).width(),l=o()(window).height(),a=Object(n.extend)(i.offset(),{width:i.width(),height:i.height()}),d="summary-right",r="summary-bottom",h={left:"auto",right:"auto",top:"auto",bottom:"auto"};this.$el.removeClass("summary-left summary-right summary-top summary-bottom"),a.left+e>s&&(d="summary-left"),a.top-window.scrollY+300>l&&(r="summary-top"),"summary-right"===d?h.left=a.left+a.width/2-22:h.right=s-(a.left+a.width/2)-22,"summary-bottom"===r?h.top=a.top+a.height+7:h.bottom=l-(a.top+a.height/2)+22,this.$el.addClass(d+" "+r),this.$el.css(h)},show:function(){this.$el.off("transitionend webkitTransitionEnd"),this.$el.css({display:"block"}),this.$el.width(),this.$el.removeClass("hidden")},hide:function(){this.$el.addClass("hidden"),this.$el.one("transitionend webkitTransitionEnd",function(){this.$el.css({display:"none"})}.bind(this))},isVisible:function(){return!this.$el.hasClass("hidden")}})}});
//# sourceMappingURL=29-a746a357d20f09905b1f.js.map